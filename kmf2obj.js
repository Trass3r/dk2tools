var Zr=Object.create;var fe=Object.defineProperty;var Xr=Object.getOwnPropertyDescriptor;var Yr=Object.getOwnPropertyNames;var Qr=Object.getPrototypeOf,Kr=Object.prototype.hasOwnProperty;var ue=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,r)=>(typeof require<"u"?require:e)[r]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')});var E=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var ti=(t,e,r,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of Yr(e))!Kr.call(t,o)&&o!==r&&fe(t,o,{get:()=>e[o],enumerable:!(s=Xr(e,o))||s.enumerable});return t};var xt=(t,e,r)=>(r=t!=null?Zr(Qr(t)):{},ti(e||!t||!t.__esModule?fe(r,"default",{value:t,enumerable:!0}):r,t));var Ut=E((on,he)=>{"use strict";he.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},r=Symbol("test"),s=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(s)!=="[object Symbol]")return!1;var o=42;e[r]=o;for(r in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var h=Object.getOwnPropertySymbols(e);if(h.length!==1||h[0]!==r||!Object.prototype.propertyIsEnumerable.call(e,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var y=Object.getOwnPropertyDescriptor(e,r);if(y.value!==o||y.enumerable!==!0)return!1}return!0}});var it=E((nn,pe)=>{"use strict";var ei=Ut();pe.exports=function(){return ei()&&!!Symbol.toStringTag}});var ye=E((sn,ce)=>{"use strict";ce.exports=RangeError});var de=E((an,le)=>{"use strict";le.exports=SyntaxError});var ge=E((fn,me)=>{"use strict";me.exports=TypeError});var _e=E((un,ve)=>{"use strict";var be=typeof Symbol<"u"&&Symbol,ri=Ut();ve.exports=function(){return typeof be!="function"||typeof Symbol!="function"||typeof be("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:ri()}});var Ee=E((hn,we)=>{"use strict";var Ae={foo:{}},ii=Object;we.exports=function(){return{__proto__:Ae}.foo===Ae.foo&&!({__proto__:null}instanceof ii)}});var Ie=E((pn,Oe)=>{"use strict";var oi="Function.prototype.bind called on incompatible ",ni=Object.prototype.toString,si=Math.max,ai="[object Function]",Se=function(e,r){for(var s=[],o=0;o<e.length;o+=1)s[o]=e[o];for(var h=0;h<r.length;h+=1)s[h+e.length]=r[h];return s},fi=function(e,r){for(var s=[],o=r||0,h=0;o<e.length;o+=1,h+=1)s[h]=e[o];return s},ui=function(t,e){for(var r="",s=0;s<t.length;s+=1)r+=t[s],s+1<t.length&&(r+=e);return r};Oe.exports=function(e){var r=this;if(typeof r!="function"||ni.apply(r)!==ai)throw new TypeError(oi+r);for(var s=fi(arguments,1),o,h=function(){if(this instanceof o){var n=r.apply(this,Se(s,arguments));return Object(n)===n?n:this}return r.apply(e,Se(s,arguments))},y=si(0,r.length-s.length),d=[],m=0;m<y;m++)d[m]="$"+m;if(o=Function("binder","return function ("+ui(d,",")+"){ return binder.apply(this,arguments); }")(h),r.prototype){var i=function(){};i.prototype=r.prototype,o.prototype=new i,i.prototype=null}return o}});var ot=E((cn,Be)=>{"use strict";var hi=Ie();Be.exports=Function.prototype.bind||hi});var xe=E((yn,Pe)=>{"use strict";var pi=Function.prototype.call,ci=Object.prototype.hasOwnProperty,yi=ot();Pe.exports=yi.call(pi,ci)});var N=E((ln,Me)=>{"use strict";var A,li=ye(),z=de(),C=ge(),Te=Function,jt=function(t){try{return Te('"use strict"; return ('+t+").constructor;")()}catch{}},M=Object.getOwnPropertyDescriptor;if(M)try{M({},"")}catch{M=null}var Ft=function(){throw new C},di=M?function(){try{return arguments.callee,Ft}catch{try{return M(arguments,"callee").get}catch{return Ft}}}():Ft,D=_e()(),mi=Ee()(),I=Object.getPrototypeOf||(mi?function(t){return t.__proto__}:null),q={},gi=typeof Uint8Array>"u"||!I?A:I(Uint8Array),V={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?A:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?A:ArrayBuffer,"%ArrayIteratorPrototype%":D&&I?I([][Symbol.iterator]()):A,"%AsyncFromSyncIteratorPrototype%":A,"%AsyncFunction%":q,"%AsyncGenerator%":q,"%AsyncGeneratorFunction%":q,"%AsyncIteratorPrototype%":q,"%Atomics%":typeof Atomics>"u"?A:Atomics,"%BigInt%":typeof BigInt>"u"?A:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?A:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?A:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?A:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?A:Float32Array,"%Float64Array%":typeof Float64Array>"u"?A:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?A:FinalizationRegistry,"%Function%":Te,"%GeneratorFunction%":q,"%Int8Array%":typeof Int8Array>"u"?A:Int8Array,"%Int16Array%":typeof Int16Array>"u"?A:Int16Array,"%Int32Array%":typeof Int32Array>"u"?A:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":D&&I?I(I([][Symbol.iterator]())):A,"%JSON%":typeof JSON=="object"?JSON:A,"%Map%":typeof Map>"u"?A:Map,"%MapIteratorPrototype%":typeof Map>"u"||!D||!I?A:I(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?A:Promise,"%Proxy%":typeof Proxy>"u"?A:Proxy,"%RangeError%":li,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?A:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?A:Set,"%SetIteratorPrototype%":typeof Set>"u"||!D||!I?A:I(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?A:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":D&&I?I(""[Symbol.iterator]()):A,"%Symbol%":D?Symbol:A,"%SyntaxError%":z,"%ThrowTypeError%":di,"%TypedArray%":gi,"%TypeError%":C,"%Uint8Array%":typeof Uint8Array>"u"?A:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?A:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?A:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?A:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?A:WeakMap,"%WeakRef%":typeof WeakRef>"u"?A:WeakRef,"%WeakSet%":typeof WeakSet>"u"?A:WeakSet};if(I)try{null.error}catch(t){Ue=I(I(t)),V["%Error.prototype%"]=Ue}var Ue,bi=function t(e){var r;if(e==="%AsyncFunction%")r=jt("async function () {}");else if(e==="%GeneratorFunction%")r=jt("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=jt("async function* () {}");else if(e==="%AsyncGenerator%"){var s=t("%AsyncGeneratorFunction%");s&&(r=s.prototype)}else if(e==="%AsyncIteratorPrototype%"){var o=t("%AsyncGenerator%");o&&I&&(r=I(o.prototype))}return V[e]=r,r},je={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Z=ot(),nt=xe(),vi=Z.call(Function.call,Array.prototype.concat),_i=Z.call(Function.apply,Array.prototype.splice),Fe=Z.call(Function.call,String.prototype.replace),st=Z.call(Function.call,String.prototype.slice),Ai=Z.call(Function.call,RegExp.prototype.exec),wi=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Ei=/\\(\\)?/g,Si=function(e){var r=st(e,0,1),s=st(e,-1);if(r==="%"&&s!=="%")throw new z("invalid intrinsic syntax, expected closing `%`");if(s==="%"&&r!=="%")throw new z("invalid intrinsic syntax, expected opening `%`");var o=[];return Fe(e,wi,function(h,y,d,m){o[o.length]=d?Fe(m,Ei,"$1"):y||h}),o},Oi=function(e,r){var s=e,o;if(nt(je,s)&&(o=je[s],s="%"+o[0]+"%"),nt(V,s)){var h=V[s];if(h===q&&(h=bi(s)),typeof h>"u"&&!r)throw new C("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:o,name:s,value:h}}throw new z("intrinsic "+e+" does not exist!")};Me.exports=function(e,r){if(typeof e!="string"||e.length===0)throw new C("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new C('"allowMissing" argument must be a boolean');if(Ai(/^%?[^%]*%?$/,e)===null)throw new z("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var s=Si(e),o=s.length>0?s[0]:"",h=Oi("%"+o+"%",r),y=h.name,d=h.value,m=!1,i=h.alias;i&&(o=i[0],_i(s,vi([0,1],i)));for(var n=1,p=!0;n<s.length;n+=1){var l=s[n],b=st(l,0,1),a=st(l,-1);if((b==='"'||b==="'"||b==="`"||a==='"'||a==="'"||a==="`")&&b!==a)throw new z("property names with quotes must have matching quotes");if((l==="constructor"||!p)&&(m=!0),o+="."+l,y="%"+o+"%",nt(V,y))d=V[y];else if(d!=null){if(!(l in d)){if(!r)throw new C("base intrinsic for "+e+" exists, but the property is not available.");return}if(M&&n+1>=s.length){var u=M(d,l);p=!!u,p&&"get"in u&&!("originalValue"in u.get)?d=u.get:d=d[l]}else p=nt(d,l),d=d[l];p&&!m&&(V[y]=d)}}return d}});var Vt=E((dn,Ve)=>{"use strict";var Ii=N(),Tt=Ii("%Object.defineProperty%",!0),Mt=function(){if(Tt)try{return Tt({},"a",{value:1}),!0}catch{return!1}return!1};Mt.hasArrayLengthDefineBug=function(){if(!Mt())return null;try{return Tt([],"length",{value:1}).length!==1}catch{return!0}};Ve.exports=Mt});var ft=E((mn,Ne)=>{"use strict";var Bi=N(),at=Bi("%Object.getOwnPropertyDescriptor%",!0);if(at)try{at([],"length")}catch{at=null}Ne.exports=at});var De=E((gn,ke)=>{"use strict";var Pi=Vt()(),Nt=N(),X=Pi&&Nt("%Object.defineProperty%",!0);if(X)try{X({},"a",{value:1})}catch{X=!1}var xi=Nt("%SyntaxError%"),$=Nt("%TypeError%"),Le=ft();ke.exports=function(e,r,s){if(!e||typeof e!="object"&&typeof e!="function")throw new $("`obj` must be an object or a function`");if(typeof r!="string"&&typeof r!="symbol")throw new $("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new $("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new $("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new $("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new $("`loose`, if provided, must be a boolean");var o=arguments.length>3?arguments[3]:null,h=arguments.length>4?arguments[4]:null,y=arguments.length>5?arguments[5]:null,d=arguments.length>6?arguments[6]:!1,m=!!Le&&Le(e,r);if(X)X(e,r,{configurable:y===null&&m?m.configurable:!y,enumerable:o===null&&m?m.enumerable:!o,value:s,writable:h===null&&m?m.writable:!h});else if(d||!o&&!h&&!y)e[r]=s;else throw new xi("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")}});var Ge=E((bn,Re)=>{"use strict";var $e=N(),qe=De(),Ui=Vt()(),Ce=ft(),ze=$e("%TypeError%"),ji=$e("%Math.floor%");Re.exports=function(e,r){if(typeof e!="function")throw new ze("`fn` is not a function");if(typeof r!="number"||r<0||r>4294967295||ji(r)!==r)throw new ze("`length` must be a positive 32-bit integer");var s=arguments.length>2&&!!arguments[2],o=!0,h=!0;if("length"in e&&Ce){var y=Ce(e,"length");y&&!y.configurable&&(o=!1),y&&!y.writable&&(h=!1)}return(o||h||!s)&&(Ui?qe(e,"length",r,!0,!0):qe(e,"length",r)),e}});var kt=E((vn,ut)=>{"use strict";var Lt=ot(),R=N(),Fi=Ge(),Ti=R("%TypeError%"),He=R("%Function.prototype.apply%"),Je=R("%Function.prototype.call%"),Ze=R("%Reflect.apply%",!0)||Lt.call(Je,He),Y=R("%Object.defineProperty%",!0),Mi=R("%Math.max%");if(Y)try{Y({},"a",{value:1})}catch{Y=null}ut.exports=function(e){if(typeof e!="function")throw new Ti("a function is required");var r=Ze(Lt,Je,arguments);return Fi(r,1+Mi(0,e.length-(arguments.length-1)),!0)};var We=function(){return Ze(Lt,He,arguments)};Y?Y(ut.exports,"apply",{value:We}):ut.exports.apply=We});var Dt=E((_n,Qe)=>{"use strict";var Xe=N(),Ye=kt(),Vi=Ye(Xe("String.prototype.indexOf"));Qe.exports=function(e,r){var s=Xe(e,!!r);return typeof s=="function"&&Vi(e,".prototype.")>-1?Ye(s):s}});var er=E((An,tr)=>{"use strict";var Ni=it()(),Li=Dt(),qt=Li("Object.prototype.toString"),ht=function(e){return Ni&&e&&typeof e=="object"&&Symbol.toStringTag in e?!1:qt(e)==="[object Arguments]"},Ke=function(e){return ht(e)?!0:e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&qt(e)!=="[object Array]"&&qt(e.callee)==="[object Function]"},ki=function(){return ht(arguments)}();ht.isLegacyArguments=Ke;tr.exports=ki?ht:Ke});var or=E((wn,ir)=>{"use strict";var Di=Object.prototype.toString,qi=Function.prototype.toString,Ci=/^\s*(?:function)?\*/,rr=it()(),Ct=Object.getPrototypeOf,zi=function(){if(!rr)return!1;try{return Function("return function*() {}")()}catch{}},zt;ir.exports=function(e){if(typeof e!="function")return!1;if(Ci.test(qi.call(e)))return!0;if(!rr){var r=Di.call(e);return r==="[object GeneratorFunction]"}if(!Ct)return!1;if(typeof zt>"u"){var s=zi();zt=s?Ct(s):!1}return Ct(e)===zt}});var fr=E((En,ar)=>{"use strict";var sr=Function.prototype.toString,G=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,Rt,pt;if(typeof G=="function"&&typeof Object.defineProperty=="function")try{Rt=Object.defineProperty({},"length",{get:function(){throw pt}}),pt={},G(function(){throw 42},null,Rt)}catch(t){t!==pt&&(G=null)}else G=null;var $i=/^\s*class\b/,Gt=function(e){try{var r=sr.call(e);return $i.test(r)}catch{return!1}},$t=function(e){try{return Gt(e)?!1:(sr.call(e),!0)}catch{return!1}},ct=Object.prototype.toString,Ri="[object Object]",Gi="[object Function]",Wi="[object GeneratorFunction]",Hi="[object HTMLAllCollection]",Ji="[object HTML document.all class]",Zi="[object HTMLCollection]",Xi=typeof Symbol=="function"&&!!Symbol.toStringTag,Yi=!(0 in[,]),Wt=function(){return!1};typeof document=="object"&&(nr=document.all,ct.call(nr)===ct.call(document.all)&&(Wt=function(e){if((Yi||!e)&&(typeof e>"u"||typeof e=="object"))try{var r=ct.call(e);return(r===Hi||r===Ji||r===Zi||r===Ri)&&e("")==null}catch{}return!1}));var nr;ar.exports=G?function(e){if(Wt(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;try{G(e,null,Rt)}catch(r){if(r!==pt)return!1}return!Gt(e)&&$t(e)}:function(e){if(Wt(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;if(Xi)return $t(e);if(Gt(e))return!1;var r=ct.call(e);return r!==Gi&&r!==Wi&&!/^\[object HTML/.test(r)?!1:$t(e)}});var pr=E((Sn,hr)=>{"use strict";var Qi=fr(),Ki=Object.prototype.toString,ur=Object.prototype.hasOwnProperty,to=function(e,r,s){for(var o=0,h=e.length;o<h;o++)ur.call(e,o)&&(s==null?r(e[o],o,e):r.call(s,e[o],o,e))},eo=function(e,r,s){for(var o=0,h=e.length;o<h;o++)s==null?r(e.charAt(o),o,e):r.call(s,e.charAt(o),o,e)},ro=function(e,r,s){for(var o in e)ur.call(e,o)&&(s==null?r(e[o],o,e):r.call(s,e[o],o,e))},io=function(e,r,s){if(!Qi(r))throw new TypeError("iterator must be a function");var o;arguments.length>=3&&(o=s),Ki.call(e)==="[object Array]"?to(e,r,o):typeof e=="string"?eo(e,r,o):ro(e,r,o)};hr.exports=io});var yr=E((On,cr)=>{"use strict";var Ht=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],oo=typeof globalThis>"u"?global:globalThis;cr.exports=function(){for(var e=[],r=0;r<Ht.length;r++)typeof oo[Ht[r]]=="function"&&(e[e.length]=Ht[r]);return e}});var Qt=E((In,gr)=>{"use strict";var lt=pr(),no=yr(),lr=kt(),Xt=Dt(),yt=ft(),so=Xt("Object.prototype.toString"),mr=it()(),dr=typeof globalThis>"u"?global:globalThis,Zt=no(),Yt=Xt("String.prototype.slice"),Jt=Object.getPrototypeOf,ao=Xt("Array.prototype.indexOf",!0)||function(e,r){for(var s=0;s<e.length;s+=1)if(e[s]===r)return s;return-1},dt={__proto__:null};mr&&yt&&Jt?lt(Zt,function(t){var e=new dr[t];if(Symbol.toStringTag in e){var r=Jt(e),s=yt(r,Symbol.toStringTag);if(!s){var o=Jt(r);s=yt(o,Symbol.toStringTag)}dt["$"+t]=lr(s.get)}}):lt(Zt,function(t){var e=new dr[t],r=e.slice||e.set;r&&(dt["$"+t]=lr(r))});var fo=function(e){var r=!1;return lt(dt,function(s,o){if(!r)try{"$"+s(e)===o&&(r=Yt(o,1))}catch{}}),r},uo=function(e){var r=!1;return lt(dt,function(s,o){if(!r)try{s(e),r=Yt(o,1)}catch{}}),r};gr.exports=function(e){if(!e||typeof e!="object")return!1;if(!mr){var r=Yt(so(e),8,-1);return ao(Zt,r)>-1?r:r!=="Object"?!1:uo(e)}return yt?fo(e):null}});var vr=E((Bn,br)=>{"use strict";var ho=Qt();br.exports=function(e){return!!ho(e)}});var Tr=E(v=>{"use strict";var po=er(),co=or(),j=Qt(),_r=vr();function W(t){return t.call.bind(t)}var Ar=typeof BigInt<"u",wr=typeof Symbol<"u",x=W(Object.prototype.toString),yo=W(Number.prototype.valueOf),lo=W(String.prototype.valueOf),mo=W(Boolean.prototype.valueOf);Ar&&(Er=W(BigInt.prototype.valueOf));var Er;wr&&(Sr=W(Symbol.prototype.valueOf));var Sr;function K(t,e){if(typeof t!="object")return!1;try{return e(t),!0}catch{return!1}}v.isArgumentsObject=po;v.isGeneratorFunction=co;v.isTypedArray=_r;function go(t){return typeof Promise<"u"&&t instanceof Promise||t!==null&&typeof t=="object"&&typeof t.then=="function"&&typeof t.catch=="function"}v.isPromise=go;function bo(t){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(t):_r(t)||Ir(t)}v.isArrayBufferView=bo;function vo(t){return j(t)==="Uint8Array"}v.isUint8Array=vo;function _o(t){return j(t)==="Uint8ClampedArray"}v.isUint8ClampedArray=_o;function Ao(t){return j(t)==="Uint16Array"}v.isUint16Array=Ao;function wo(t){return j(t)==="Uint32Array"}v.isUint32Array=wo;function Eo(t){return j(t)==="Int8Array"}v.isInt8Array=Eo;function So(t){return j(t)==="Int16Array"}v.isInt16Array=So;function Oo(t){return j(t)==="Int32Array"}v.isInt32Array=Oo;function Io(t){return j(t)==="Float32Array"}v.isFloat32Array=Io;function Bo(t){return j(t)==="Float64Array"}v.isFloat64Array=Bo;function Po(t){return j(t)==="BigInt64Array"}v.isBigInt64Array=Po;function xo(t){return j(t)==="BigUint64Array"}v.isBigUint64Array=xo;function mt(t){return x(t)==="[object Map]"}mt.working=typeof Map<"u"&&mt(new Map);function Uo(t){return typeof Map>"u"?!1:mt.working?mt(t):t instanceof Map}v.isMap=Uo;function gt(t){return x(t)==="[object Set]"}gt.working=typeof Set<"u"&&gt(new Set);function jo(t){return typeof Set>"u"?!1:gt.working?gt(t):t instanceof Set}v.isSet=jo;function bt(t){return x(t)==="[object WeakMap]"}bt.working=typeof WeakMap<"u"&&bt(new WeakMap);function Fo(t){return typeof WeakMap>"u"?!1:bt.working?bt(t):t instanceof WeakMap}v.isWeakMap=Fo;function te(t){return x(t)==="[object WeakSet]"}te.working=typeof WeakSet<"u"&&te(new WeakSet);function To(t){return te(t)}v.isWeakSet=To;function vt(t){return x(t)==="[object ArrayBuffer]"}vt.working=typeof ArrayBuffer<"u"&&vt(new ArrayBuffer);function Or(t){return typeof ArrayBuffer>"u"?!1:vt.working?vt(t):t instanceof ArrayBuffer}v.isArrayBuffer=Or;function _t(t){return x(t)==="[object DataView]"}_t.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&_t(new DataView(new ArrayBuffer(1),0,1));function Ir(t){return typeof DataView>"u"?!1:_t.working?_t(t):t instanceof DataView}v.isDataView=Ir;var Kt=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function Q(t){return x(t)==="[object SharedArrayBuffer]"}function Br(t){return typeof Kt>"u"?!1:(typeof Q.working>"u"&&(Q.working=Q(new Kt)),Q.working?Q(t):t instanceof Kt)}v.isSharedArrayBuffer=Br;function Mo(t){return x(t)==="[object AsyncFunction]"}v.isAsyncFunction=Mo;function Vo(t){return x(t)==="[object Map Iterator]"}v.isMapIterator=Vo;function No(t){return x(t)==="[object Set Iterator]"}v.isSetIterator=No;function Lo(t){return x(t)==="[object Generator]"}v.isGeneratorObject=Lo;function ko(t){return x(t)==="[object WebAssembly.Module]"}v.isWebAssemblyCompiledModule=ko;function Pr(t){return K(t,yo)}v.isNumberObject=Pr;function xr(t){return K(t,lo)}v.isStringObject=xr;function Ur(t){return K(t,mo)}v.isBooleanObject=Ur;function jr(t){return Ar&&K(t,Er)}v.isBigIntObject=jr;function Fr(t){return wr&&K(t,Sr)}v.isSymbolObject=Fr;function Do(t){return Pr(t)||xr(t)||Ur(t)||jr(t)||Fr(t)}v.isBoxedPrimitive=Do;function qo(t){return typeof Uint8Array<"u"&&(Or(t)||Br(t))}v.isAnyArrayBuffer=qo;["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(t){Object.defineProperty(v,t,{enumerable:!1,value:function(){throw new Error(t+" is not supported in userland")}})})});var Vr=E((xn,Mr)=>{Mr.exports=function(e){return e&&typeof e=="object"&&typeof e.copy=="function"&&typeof e.fill=="function"&&typeof e.readUInt8=="function"}});var Nr=E((Un,ee)=>{typeof Object.create=="function"?ee.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:ee.exports=function(e,r){if(r){e.super_=r;var s=function(){};s.prototype=r.prototype,e.prototype=new s,e.prototype.constructor=e}}});var Cr=E(_=>{var Lr=Object.getOwnPropertyDescriptors||function(e){for(var r=Object.keys(e),s={},o=0;o<r.length;o++)s[r[o]]=Object.getOwnPropertyDescriptor(e,r[o]);return s},Co=/%[sdj%]/g;_.format=function(t){if(!It(t)){for(var e=[],r=0;r<arguments.length;r++)e.push(T(arguments[r]));return e.join(" ")}for(var r=1,s=arguments,o=s.length,h=String(t).replace(Co,function(d){if(d==="%%")return"%";if(r>=o)return d;switch(d){case"%s":return String(s[r++]);case"%d":return Number(s[r++]);case"%j":try{return JSON.stringify(s[r++])}catch{return"[Circular]"}default:return d}}),y=s[r];r<o;y=s[++r])Ot(y)||!H(y)?h+=" "+y:h+=" "+T(y);return h};_.deprecate=function(t,e){if(typeof process<"u"&&process.noDeprecation===!0)return t;if(typeof process>"u")return function(){return _.deprecate(t,e).apply(this,arguments)};var r=!1;function s(){if(!r){if(process.throwDeprecation)throw new Error(e);process.traceDeprecation?console.trace(e):console.error(e),r=!0}return t.apply(this,arguments)}return s};var At={},zo=/^$/;_.debuglog=function(t){if(t=t.toUpperCase(),!At[t])if(zo.test(t)){var e=process.pid;At[t]=function(){var r=_.format.apply(_,arguments);console.error("%s %d: %s",t,e,r)}}else At[t]=function(){};return At[t]};function T(t,e){var r={seen:[],stylize:Ro};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),ne(e)?r.showHidden=e:e&&_._extend(r,e),k(r.showHidden)&&(r.showHidden=!1),k(r.depth)&&(r.depth=2),k(r.colors)&&(r.colors=!1),k(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=$o),Et(r,t,r.depth)}_.inspect=T;T.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};T.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function $o(t,e){var r=T.styles[e];return r?"\x1B["+T.colors[r][0]+"m"+t+"\x1B["+T.colors[r][1]+"m":t}function Ro(t,e){return t}function Go(t){var e={};return t.forEach(function(r,s){e[r]=!0}),e}function Et(t,e,r){if(t.customInspect&&e&&wt(e.inspect)&&e.inspect!==_.inspect&&!(e.constructor&&e.constructor.prototype===e)){var s=e.inspect(r,t);return It(s)||(s=Et(t,s,r)),s}var o=Wo(t,e);if(o)return o;var h=Object.keys(e),y=Go(h);if(t.showHidden&&(h=Object.getOwnPropertyNames(e)),et(e)&&(h.indexOf("message")>=0||h.indexOf("description")>=0))return re(e);if(h.length===0){if(wt(e)){var d=e.name?": "+e.name:"";return t.stylize("[Function"+d+"]","special")}if(tt(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(St(e))return t.stylize(Date.prototype.toString.call(e),"date");if(et(e))return re(e)}var m="",i=!1,n=["{","}"];if(kr(e)&&(i=!0,n=["[","]"]),wt(e)){var p=e.name?": "+e.name:"";m=" [Function"+p+"]"}if(tt(e)&&(m=" "+RegExp.prototype.toString.call(e)),St(e)&&(m=" "+Date.prototype.toUTCString.call(e)),et(e)&&(m=" "+re(e)),h.length===0&&(!i||e.length==0))return n[0]+m+n[1];if(r<0)return tt(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special");t.seen.push(e);var l;return i?l=Ho(t,e,r,y,h):l=h.map(function(b){return oe(t,e,r,y,b,i)}),t.seen.pop(),Jo(l,m,n)}function Wo(t,e){if(k(e))return t.stylize("undefined","undefined");if(It(e)){var r="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(r,"string")}if(Dr(e))return t.stylize(""+e,"number");if(ne(e))return t.stylize(""+e,"boolean");if(Ot(e))return t.stylize("null","null")}function re(t){return"["+Error.prototype.toString.call(t)+"]"}function Ho(t,e,r,s,o){for(var h=[],y=0,d=e.length;y<d;++y)qr(e,String(y))?h.push(oe(t,e,r,s,String(y),!0)):h.push("");return o.forEach(function(m){m.match(/^\d+$/)||h.push(oe(t,e,r,s,m,!0))}),h}function oe(t,e,r,s,o,h){var y,d,m;if(m=Object.getOwnPropertyDescriptor(e,o)||{value:e[o]},m.get?m.set?d=t.stylize("[Getter/Setter]","special"):d=t.stylize("[Getter]","special"):m.set&&(d=t.stylize("[Setter]","special")),qr(s,o)||(y="["+o+"]"),d||(t.seen.indexOf(m.value)<0?(Ot(r)?d=Et(t,m.value,null):d=Et(t,m.value,r-1),d.indexOf(`
`)>-1&&(h?d=d.split(`
`).map(function(i){return"  "+i}).join(`
`).slice(2):d=`
`+d.split(`
`).map(function(i){return"   "+i}).join(`
`))):d=t.stylize("[Circular]","special")),k(y)){if(h&&o.match(/^\d+$/))return d;y=JSON.stringify(""+o),y.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(y=y.slice(1,-1),y=t.stylize(y,"name")):(y=y.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),y=t.stylize(y,"string"))}return y+": "+d}function Jo(t,e,r){var s=0,o=t.reduce(function(h,y){return s++,y.indexOf(`
`)>=0&&s++,h+y.replace(/\u001b\[\d\d?m/g,"").length+1},0);return o>60?r[0]+(e===""?"":e+`
 `)+" "+t.join(`,
  `)+" "+r[1]:r[0]+e+" "+t.join(", ")+" "+r[1]}_.types=Tr();function kr(t){return Array.isArray(t)}_.isArray=kr;function ne(t){return typeof t=="boolean"}_.isBoolean=ne;function Ot(t){return t===null}_.isNull=Ot;function Zo(t){return t==null}_.isNullOrUndefined=Zo;function Dr(t){return typeof t=="number"}_.isNumber=Dr;function It(t){return typeof t=="string"}_.isString=It;function Xo(t){return typeof t=="symbol"}_.isSymbol=Xo;function k(t){return t===void 0}_.isUndefined=k;function tt(t){return H(t)&&se(t)==="[object RegExp]"}_.isRegExp=tt;_.types.isRegExp=tt;function H(t){return typeof t=="object"&&t!==null}_.isObject=H;function St(t){return H(t)&&se(t)==="[object Date]"}_.isDate=St;_.types.isDate=St;function et(t){return H(t)&&(se(t)==="[object Error]"||t instanceof Error)}_.isError=et;_.types.isNativeError=et;function wt(t){return typeof t=="function"}_.isFunction=wt;function Yo(t){return t===null||typeof t=="boolean"||typeof t=="number"||typeof t=="string"||typeof t=="symbol"||typeof t>"u"}_.isPrimitive=Yo;_.isBuffer=Vr();function se(t){return Object.prototype.toString.call(t)}function ie(t){return t<10?"0"+t.toString(10):t.toString(10)}var Qo=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Ko(){var t=new Date,e=[ie(t.getHours()),ie(t.getMinutes()),ie(t.getSeconds())].join(":");return[t.getDate(),Qo[t.getMonth()],e].join(" ")}_.log=function(){console.log("%s - %s",Ko(),_.format.apply(_,arguments))};_.inherits=Nr();_._extend=function(t,e){if(!e||!H(e))return t;for(var r=Object.keys(e),s=r.length;s--;)t[r[s]]=e[r[s]];return t};function qr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var L=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;_.promisify=function(e){if(typeof e!="function")throw new TypeError('The "original" argument must be of type Function');if(L&&e[L]){var r=e[L];if(typeof r!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(r,L,{value:r,enumerable:!1,writable:!1,configurable:!0}),r}function r(){for(var s,o,h=new Promise(function(m,i){s=m,o=i}),y=[],d=0;d<arguments.length;d++)y.push(arguments[d]);y.push(function(m,i){m?o(m):s(i)});try{e.apply(this,y)}catch(m){o(m)}return h}return Object.setPrototypeOf(r,Object.getPrototypeOf(e)),L&&Object.defineProperty(r,L,{value:r,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(r,Lr(e))};_.promisify.custom=L;function tn(t,e){if(!t){var r=new Error("Promise was rejected with a falsy value");r.reason=t,t=r}return e(t)}function en(t){if(typeof t!="function")throw new TypeError('The "original" argument must be of type Function');function e(){for(var r=[],s=0;s<arguments.length;s++)r.push(arguments[s]);var o=r.pop();if(typeof o!="function")throw new TypeError("The last argument must be of type Function");var h=this,y=function(){return o.apply(h,arguments)};t.apply(this,r).then(function(d){process.nextTick(y.bind(null,null,d))},function(d){process.nextTick(tn.bind(null,d,y))})}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),Object.defineProperties(e,Lr(t)),e}_.callbackify=en});var zr=E(()=>{});var $r=E(()=>{});var ae=E((Rr,Bt)=>{"use strict";(function(t,e){typeof define=="function"&&define.amd?define([],e):typeof Bt=="object"&&Bt.exports?Bt.exports=e():t.KaitaiStream=e()})(typeof self<"u"?self:Rr,function(){var t=function(i,n){this._byteOffset=n||0,i instanceof ArrayBuffer?this.buffer=i:typeof i=="object"?(this.dataView=i,n&&(this._byteOffset+=n)):this.buffer=new ArrayBuffer(i||1),this.pos=0,this.alignToByte()};t.prototype={},t.depUrls={zlib:void 0},t.prototype._byteLength=0,Object.defineProperty(t.prototype,"buffer",{get:function(){return this._trimAlloc(),this._buffer},set:function(i){this._buffer=i,this._dataView=new DataView(this._buffer,this._byteOffset),this._byteLength=this._buffer.byteLength}}),Object.defineProperty(t.prototype,"byteOffset",{get:function(){return this._byteOffset},set:function(i){this._byteOffset=i,this._dataView=new DataView(this._buffer,this._byteOffset),this._byteLength=this._buffer.byteLength}}),Object.defineProperty(t.prototype,"dataView",{get:function(){return this._dataView},set:function(i){this._byteOffset=i.byteOffset,this._buffer=i.buffer,this._dataView=new DataView(this._buffer,this._byteOffset),this._byteLength=this._byteOffset+i.byteLength}}),t.prototype._trimAlloc=function(){if(this._byteLength!==this._buffer.byteLength){var i=new ArrayBuffer(this._byteLength),n=new Uint8Array(i),p=new Uint8Array(this._buffer,0,n.length);n.set(p),this.buffer=i}},t.prototype.isEof=function(){return this.pos>=this.size&&this.bitsLeft===0},t.prototype.seek=function(i){var n=Math.max(0,Math.min(this.size,i));this.pos=isNaN(n)||!isFinite(n)?0:n},Object.defineProperty(t.prototype,"size",{get:function(){return this._byteLength-this._byteOffset}}),t.prototype.readS1=function(){this.ensureBytesLeft(1);var i=this._dataView.getInt8(this.pos);return this.pos+=1,i},t.prototype.readS2be=function(){this.ensureBytesLeft(2);var i=this._dataView.getInt16(this.pos);return this.pos+=2,i},t.prototype.readS4be=function(){this.ensureBytesLeft(4);var i=this._dataView.getInt32(this.pos);return this.pos+=4,i},t.prototype.readS8be=function(){this.ensureBytesLeft(8);var i=this.readU4be(),n=this.readU4be();return i&2147483648?-(4294967296*(i^4294967295)+(n^4294967295))-1:4294967296*i+n},t.prototype.readS2le=function(){this.ensureBytesLeft(2);var i=this._dataView.getInt16(this.pos,!0);return this.pos+=2,i},t.prototype.readS4le=function(){this.ensureBytesLeft(4);var i=this._dataView.getInt32(this.pos,!0);return this.pos+=4,i},t.prototype.readS8le=function(){this.ensureBytesLeft(8);var i=this.readU4le(),n=this.readU4le();return n&2147483648?-(4294967296*(n^4294967295)+(i^4294967295))-1:4294967296*n+i},t.prototype.readU1=function(){this.ensureBytesLeft(1);var i=this._dataView.getUint8(this.pos);return this.pos+=1,i},t.prototype.readU2be=function(){this.ensureBytesLeft(2);var i=this._dataView.getUint16(this.pos);return this.pos+=2,i},t.prototype.readU4be=function(){this.ensureBytesLeft(4);var i=this._dataView.getUint32(this.pos);return this.pos+=4,i},t.prototype.readU8be=function(){this.ensureBytesLeft(8);var i=this.readU4be(),n=this.readU4be();return 4294967296*i+n},t.prototype.readU2le=function(){this.ensureBytesLeft(2);var i=this._dataView.getUint16(this.pos,!0);return this.pos+=2,i},t.prototype.readU4le=function(){this.ensureBytesLeft(4);var i=this._dataView.getUint32(this.pos,!0);return this.pos+=4,i},t.prototype.readU8le=function(){this.ensureBytesLeft(8);var i=this.readU4le(),n=this.readU4le();return 4294967296*n+i},t.prototype.readF4be=function(){this.ensureBytesLeft(4);var i=this._dataView.getFloat32(this.pos);return this.pos+=4,i},t.prototype.readF8be=function(){this.ensureBytesLeft(8);var i=this._dataView.getFloat64(this.pos);return this.pos+=8,i},t.prototype.readF4le=function(){this.ensureBytesLeft(4);var i=this._dataView.getFloat32(this.pos,!0);return this.pos+=4,i},t.prototype.readF8le=function(){this.ensureBytesLeft(8);var i=this._dataView.getFloat64(this.pos,!0);return this.pos+=8,i},t.prototype.alignToByte=function(){this.bitsLeft=0,this.bits=0},t.prototype.readBitsIntBe=function(i){if(i>32)throw new RangeError("readBitsIntBe: the maximum supported bit length is 32 (tried to read "+i+" bits)");var n=0,p=i-this.bitsLeft;if(this.bitsLeft=-p&7,p>0){for(var l=(p-1>>3)+1,b=this.readBytes(l),a=0;a<l;a++)n=n<<8|b[a];var u=n;n=n>>>this.bitsLeft|this.bits<<p,this.bits=u}else n=this.bits>>>-p;var c=(1<<this.bitsLeft)-1;return this.bits&=c,n>>>0},t.prototype.readBitsInt=t.prototype.readBitsIntBe,t.prototype.readBitsIntLe=function(i){if(i>32)throw new RangeError("readBitsIntLe: the maximum supported bit length is 32 (tried to read "+i+" bits)");var n=0,p=i-this.bitsLeft;if(p>0){for(var l=(p-1>>3)+1,b=this.readBytes(l),a=0;a<l;a++)n|=b[a]<<a*8;var u=p<32?n>>>p:0;n=n<<this.bitsLeft|this.bits,this.bits=u}else n=this.bits,this.bits>>>=i;if(this.bitsLeft=-p&7,i<32){var c=(1<<i)-1;n&=c}else n>>>=0;return n},t.endianness=new Int8Array(new Int16Array([1]).buffer)[0]>0,t.prototype.readBytes=function(i){return this.mapUint8Array(i)},t.prototype.readBytesFull=function(){return this.mapUint8Array(this.size-this.pos)},t.prototype.readBytesTerm=function(i,n,p,l){for(var b=this.size-this.pos,a=new Uint8Array(this._buffer,this._byteOffset+this.pos),u=0;u<b&&a[u]!==i;u++);if(u===b){if(l)throw"End of stream reached, but no terminator "+i+" found";return this.mapUint8Array(u)}else{var c;return n?c=this.mapUint8Array(u+1):c=this.mapUint8Array(u),p&&(this.pos+=1),c}},t.prototype.ensureFixedContents=function(i){var n=this.readBytes(i.length);if(n.length!==i.length)throw new r(i,n);for(var p=n.length,l=0;l<p;l++)if(n[l]!==i[l])throw new r(i,n);return n},t.bytesStripRight=function(i,n){for(var p=i.length;i[p-1]===n;)p--;return i.slice(0,p)},t.bytesTerminate=function(i,n,p){for(var l=0,b=i.length;l<b&&i[l]!==n;)l++;return p&&l<b&&l++,i.slice(0,l)},t.bytesToStr=function(i,n){if(n==null||n.toLowerCase()==="ascii")return t.createStringFromArray(i);if(typeof TextDecoder=="function")return new TextDecoder(n).decode(i);switch(n.toLowerCase()){case"utf8":case"utf-8":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return new Buffer(i).toString(n);default:return typeof t.iconvlite>"u"&&(t.iconvlite=zr()),t.iconvlite.decode(i,n)}},t.processXorOne=function(i,n){for(var p=new Uint8Array(i.length),l=i.length,b=0;b<l;b++)p[b]=i[b]^n;return p},t.processXorMany=function(i,n){for(var p=i.length,l=new Uint8Array(p),b=n.length,a=0,u=0;u<p;u++)l[u]=i[u]^n[a],a++,a>=b&&(a=0);return l},t.processRotateLeft=function(i,n,p){if(p!==1)throw"unable to rotate group of "+p+" bytes yet";for(var l=p*8-1,b=-n&l,a=new Uint8Array(i.length),u=0;u<i.length;u++)a[u]=i[u]<<n&255|i[u]>>b;return a},t.processZlib=function(i){if(typeof ue<"u"){typeof t.zlib>"u"&&(t.zlib=$r());var n=t.zlib.inflateSync(Buffer.from(i.buffer.slice(i.byteOffset,i.byteOffset+i.byteLength)));return n}else return typeof t.zlib>"u"&&typeof t.depUrls.zlib<"u"&&(importScripts(t.depUrls.zlib),t.zlib=pako),n=t.zlib.inflate(i),n},t.mod=function(i,n){if(n<=0)throw"mod divisor <= 0";var p=i%n;return p<0&&(p+=n),p},t.arrayMin=function(i){for(var n=i[0],p,l=1,b=i.length;l<b;++l)p=i[l],p<n&&(n=p);return n},t.arrayMax=function(i){for(var n=i[0],p,l=1,b=i.length;l<b;++l)p=i[l],p>n&&(n=p);return n},t.byteArrayCompare=function(i,n){if(i===n)return 0;for(var p=i.length,l=n.length,b=p<l?p:l,a=0;a<b;a++){var u=i[a]-n[a];if(u!==0)return u}return p===l?0:p-l};var e=t.EOFError=function(i,n){this.name="EOFError",this.message="requested "+i+" bytes, but only "+n+" bytes available",this.bytesReq=i,this.bytesAvail=n,this.stack=new Error().stack};e.prototype=Object.create(Error.prototype),e.prototype.constructor=e;var r=t.UnexpectedDataError=function(i,n){this.name="UnexpectedDataError",this.message="expected ["+i+"], but got ["+n+"]",this.expected=i,this.actual=n,this.stack=new Error().stack};r.prototype=Object.create(Error.prototype),r.prototype.constructor=r;var s=t.UndecidedEndiannessError=function(){this.name="UndecidedEndiannessError",this.stack=new Error().stack};s.prototype=Object.create(Error.prototype),s.prototype.constructor=s;var o=t.ValidationNotEqualError=function(i,n){this.name="ValidationNotEqualError",this.message="not equal, expected ["+i+"], but got ["+n+"]",this.expected=i,this.actual=n,this.stack=new Error().stack};o.prototype=Object.create(Error.prototype),o.prototype.constructor=o;var h=t.ValidationLessThanError=function(i,n){this.name="ValidationLessThanError",this.message="not in range, min ["+i+"], but got ["+n+"]",this.min=i,this.actual=n,this.stack=new Error().stack};h.prototype=Object.create(Error.prototype),h.prototype.constructor=h;var y=t.ValidationGreaterThanError=function(i,n){this.name="ValidationGreaterThanError",this.message="not in range, max ["+i+"], but got ["+n+"]",this.max=i,this.actual=n,this.stack=new Error().stack};y.prototype=Object.create(Error.prototype),y.prototype.constructor=y;var d=t.ValidationNotAnyOfError=function(i,n,p){this.name="ValidationNotAnyOfError",this.message="not any of the list, got ["+i+"]",this.actual=i,this.stack=new Error().stack};d.prototype=Object.create(Error.prototype),d.prototype.constructor=d;var m=t.ValidationExprError=function(i,n,p){this.name="ValidationExprError",this.message="not matching the expression, got ["+i+"]",this.actual=i,this.stack=new Error().stack};return m.prototype=Object.create(Error.prototype),m.prototype.constructor=m,t.prototype.ensureBytesLeft=function(i){if(this.pos+i>this.size)throw new e(i,this.size-this.pos)},t.prototype.mapUint8Array=function(i){i|=0,this.ensureBytesLeft(i);var n=new Uint8Array(this._buffer,this.byteOffset+this.pos,i);return this.pos+=i,n},t.createStringFromArray=function(i){for(var n=32768,p=[],l=typeof i.subarray=="function",b=0;b<i.length;b+=n)p.push(String.fromCharCode.apply(null,l?i.subarray(b,b+n):i.slice(b,b+n)));return p.join("")},t})});var Wr=E((Gr,Pt)=>{(function(t,e){typeof define=="function"&&define.amd?define(["kaitai-struct/KaitaiStream"],e):typeof Pt=="object"&&Pt.exports?Pt.exports=e(ae()):t.Kmf=e(t.KaitaiStream)})(typeof self<"u"?self:Gr,function(t){var e=function(){r.MeshFormat=Object.freeze({MESH:1,ANIM:2,GROUP:3,1:"MESH",2:"ANIM",3:"GROUP"});function r(a,u,c){this._io=a,this._parent=u,this._root=c||this,this._read()}r.prototype._read=function(){if(this.magic=this._io.readBytes(4),t.byteArrayCompare(this.magic,[75,77,83,72])!=0)throw new t.ValidationNotEqualError([75,77,83,72],this.magic,this._io,"/seq/0");if(this.size=this._io.readU4le(),this.version=this._io.readU4le(),this.version!=17)throw new t.ValidationNotEqualError(17,this.version,this._io,"/seq/2");this.header=new s(this._io,this,this._root),this.materials=new n(this._io,this,this._root),this.mesh=new i(this._io,this,this._root)};var s=r.Kmfheader=function(){function a(u,c,f){this._io=u,this._parent=c,this._root=f||this,this._read()}return a.prototype._read=function(){if(this.magic=this._io.readBytes(4),t.byteArrayCompare(this.magic,[72,69,65,68])!=0)throw new t.ValidationNotEqualError([72,69,65,68],this.magic,this._io,"/types/kmfheader/seq/0");if(this.size=this._io.readU4le(),this.format=this._io.readU4le(),this.uk=this._io.readU4le(),this.uk!=1)throw new t.ValidationNotEqualError(1,this.uk,this._io,"/types/kmfheader/seq/3")},a}(),o=r.Model=function(){function a(f,g,w){this._io=f,this._parent=g,this._root=w||this,this._read()}a.prototype._read=function(){if(this.magic=this._io.readBytes(4),t.byteArrayCompare(this.magic,[83,80,82,83])!=0)throw new t.ValidationNotEqualError([83,80,82,83],this.magic,this._io,"/types/model/seq/0");this.size=this._io.readU4le(),this.groups=[];for(var f=0;f<this._parent.header.numGroups;f++)this.groups.push(new u(this._io,this,this._root,f));this.groupData=[];for(var f=0;f<this._parent.header.numGroups;f++)this.groupData.push(new c(this._io,this,this._root,f))};var u=a.Sphd=function(){function f(g,w,P,O){this._io=g,this._parent=w,this._root=P||this,this.groupIdx=O,this._read()}return f.prototype._read=function(){if(this.magic=this._io.readBytes(4),t.byteArrayCompare(this.magic,[83,80,72,68])!=0)throw new t.ValidationNotEqualError([83,80,72,68],this.magic,this._io,"/types/model/types/sphd/seq/0");this.size=this._io.readU4le(),this.numTrisPerLevel=[];for(var g=0;g<this._parent._parent.header.numLods;g++)this.numTrisPerLevel.push(this._io.readU4le());this.numVertices=this._io.readU4le(),this.mmFactor=this._io.readF4le()},f}(),c=a.Sprs=function(){function f(O,S,B,U){this._io=O,this._parent=S,this._root=B||this,this.groupIdx=U,this._read()}f.prototype._read=function(){if(this.magic=this._io.readBytes(4),t.byteArrayCompare(this.magic,[83,80,82,83])!=0)throw new t.ValidationNotEqualError([83,80,82,83],this.magic,this._io,"/types/model/types/sprs/seq/0");this.size=this._io.readU4le(),this.materialIdx=this._io.readU4le(),this.polygons=new g(this._io,this,this._root,this.groupIdx),this.vertices=new P(this._io,this,this._root,this.groupIdx)};var g=f.Poly=function(){function O(S,B,U,F){this._io=S,this._parent=B,this._root=U||this,this.groupIdx=F,this._read()}return O.prototype._read=function(){if(this._root.header.format==r.MeshFormat.ANIM&&(this.polyMagic=this._io.readBytes(4),t.byteArrayCompare(this.polyMagic,[80,79,76,89])!=0))throw new t.ValidationNotEqualError([80,79,76,89],this.polyMagic,this._io,"/types/model/types/sprs/types/poly/seq/0");this._root.header.format==r.MeshFormat.ANIM&&(this.polySize=this._io.readU4le()),this.lodLevels=[];for(var S=0;S<this._parent._parent._parent.header.numLods;S++)this.lodLevels.push(new w(this._io,this,this._root,this.groupIdx,S))},O}(),w=f.LodLevel=function(){function O(S,B,U,F,J){this._io=S,this._parent=B,this._root=U||this,this.groupIdx=F,this.level=J,this._read()}return O.prototype._read=function(){this.triangles=[];for(var S=0;S<this._parent._parent._parent.groups[this.groupIdx].numTrisPerLevel[this.level];S++)this.triangles.push(new m(this._io,this,this._root))},O}(),P=f.Vert=function(){function O(S,B,U,F){this._io=S,this._parent=B,this._root=U||this,this.groupIdx=F,this._read()}return O.prototype._read=function(){if(this._root.header.format==r.MeshFormat.ANIM&&(this.vertMagic=this._io.readBytes(4),t.byteArrayCompare(this.vertMagic,[86,69,82,84])!=0))throw new t.ValidationNotEqualError([86,69,82,84],this.vertMagic,this._io,"/types/model/types/sprs/types/vert/seq/0");this._root.header.format==r.MeshFormat.ANIM&&(this.vertSize=this._io.readU4le()),this.vertexData=[];for(var S=0;S<this._parent._parent.groups[this.groupIdx].numVertices;S++)this.vertexData.push(new y(this._io,this,this._root))},O}();return f}();return a}(),h=r.Itab=function(){function a(c,f,g){this._io=c,this._parent=f,this._root=g||this,this._read()}a.prototype._read=function(){if(this.magic=this._io.readBytes(4),t.byteArrayCompare(this.magic,[73,84,65,66])!=0)throw new t.ValidationNotEqualError([73,84,65,66],this.magic,this._io,"/types/itab/seq/0");this.size=this._io.readU4le(),this.frameChunks=[];for(var c=0;c<Math.floor((this._parent.header.numFrames-1)/128)+1;c++)this.frameChunks.push(new u(this._io,this,this._root))};var u=a.FrameChunk=function(){function c(f,g,w){this._io=f,this._parent=g,this._root=w||this,this._read()}return c.prototype._read=function(){this.geomBase=[];for(var f=0;f<this._parent._parent.header.numItabEntries;f++)this.geomBase.push(this._io.readU4le())},c}();return a}(),y=r.VertexData=function(){function a(u,c,f){this._io=u,this._parent=c,this._root=f||this,this._read()}return a.prototype._read=function(){this._root.header.format==r.MeshFormat.MESH&&(this.geomIdx=this._io.readU2le()),this.u=this._io.readU2le(),this.v=this._io.readU2le(),this.normal=new p(this._io,this,this._root),this._root.header.format==r.MeshFormat.ANIM&&(this.itabIdx=this._io.readU2le())},Object.defineProperty(a.prototype,"uv",{get:function(){return this._m_uv!==void 0?this._m_uv:(this._m_uv=[this.u/32768,this.v/32768],this._m_uv)}}),a}(),d=r.Ctrl=function(){function a(c,f,g){this._io=c,this._parent=f,this._root=g||this,this._read()}a.prototype._read=function(){if(this.magic=this._io.readBytes(4),t.byteArrayCompare(this.magic,[67,84,82,76])!=0)throw new t.ValidationNotEqualError([67,84,82,76],this.magic,this._io,"/types/ctrl/seq/0");this.size=this._io.readU4le(),this.numCtrls=this._io.readU4le(),this.ctrls=[];for(var c=0;c<this.numCtrls;c++)this.ctrls.push(new u(this._io,this,this._root))};var u=a.Ctrls=function(){function c(f,g,w){this._io=f,this._parent=g,this._root=w||this,this._read()}return c.prototype._read=function(){this.uk1=this._io.readU2le(),this.uk2=this._io.readU2le(),this.uk3=this._io.readU4le()},c}();return a}(),m=r.Triangle=function(){function a(u,c,f){this._io=u,this._parent=c,this._root=f||this,this._read()}return a.prototype._read=function(){this.x=this._io.readU1(),this.y=this._io.readU1(),this.z=this._io.readU1()},a}(),i=r.Mesh=function(){function a(c,f,g){this._io=c,this._parent=f,this._root=g||this,this._read()}a.prototype._read=function(){if(this._root.header.format==r.MeshFormat.MESH&&(this.magic=this._io.readBytes(4),t.byteArrayCompare(this.magic,[77,69,83,72])!=0))throw new t.ValidationNotEqualError([77,69,83,72],this.magic,this._io,"/types/mesh/seq/0");if(this._root.header.format==r.MeshFormat.ANIM&&(this.magicAnim=this._io.readBytes(4),t.byteArrayCompare(this.magicAnim,[65,78,73,77])!=0))throw new t.ValidationNotEqualError([65,78,73,77],this.magicAnim,this._io,"/types/mesh/seq/1");this.size=this._io.readU4le(),this.header=new u(this._io,this,this._root),this.ctrl=new d(this._io,this,this._root),this.model=new o(this._io,this,this._root),this._root.header.format==r.MeshFormat.ANIM&&(this.itab=new h(this._io,this,this._root)),this.geom=new b(this._io,this,this._root),this._root.header.format==r.MeshFormat.ANIM&&(this.vgeo=new l(this._io,this,this._root))};var u=a.Meshheader=function(){c.FrameFactorFunction=Object.freeze({CLAMP:0,WRAP:1,0:"CLAMP",1:"WRAP"});function c(f,g,w){this._io=f,this._parent=g,this._root=w||this,this._read()}return c.prototype._read=function(){if(this.magic=this._io.readBytes(4),t.byteArrayCompare(this.magic,[72,69,65,68])!=0)throw new t.ValidationNotEqualError([72,69,65,68],this.magic,this._io,"/types/mesh/types/meshheader/seq/0");this.size=this._io.readU4le(),this.meshname=t.bytesToStr(this._io.readBytesTerm(0,!1,!0,!0),"ASCII"),this.numGroups=this._io.readU4le(),this._root.header.format==r.MeshFormat.ANIM&&(this.numFrames=this._io.readU4le()),this._root.header.format==r.MeshFormat.ANIM&&(this.numItabEntries=this._io.readU4le()),this.numBaseVertices=this._io.readU4le(),this._root.header.format==r.MeshFormat.ANIM&&(this.frameFactorFunction=this._io.readU4le()),this.translation=new p(this._io,this,this._root),this._root.header.format==r.MeshFormat.ANIM&&(this.cubeScale=this._io.readF4le()),this.scale=this._io.readF4le(),this.numLods=this._io.readU4le()},c}();return a}(),n=r.Matl=function(){function a(c,f,g){this._io=c,this._parent=f,this._root=g||this,this._read()}a.prototype._read=function(){if(this.magic=this._io.readBytes(4),t.byteArrayCompare(this.magic,[77,65,84,76])!=0)throw new t.ValidationNotEqualError([77,65,84,76],this.magic,this._io,"/types/matl/seq/0");this.size=this._io.readU4le(),this.numMaterials=this._io.readU4le(),this.materials=[];for(var c=0;c<this.numMaterials;c++)this.materials.push(new u(this._io,this,this._root))};var u=a.Mat2=function(){c.MaterialFlags=Object.freeze({HAS_ALPHA:1,DOUBLE_SIDED:2,ALPHA_ADDITIVE:4,UNKNOWN8:8,UNKNOWN10:16,UNKNOWN20:32,IS_SHININESS_SET:64,IS_BRIGHTNESS_SET:128,INVISIBLE:256,1:"HAS_ALPHA",2:"DOUBLE_SIDED",4:"ALPHA_ADDITIVE",8:"UNKNOWN8",16:"UNKNOWN10",32:"UNKNOWN20",64:"IS_SHININESS_SET",128:"IS_BRIGHTNESS_SET",256:"INVISIBLE"});function c(f,g,w){this._io=f,this._parent=g,this._root=w||this,this._read()}return c.prototype._read=function(){if(this.magic=this._io.readBytes(4),t.byteArrayCompare(this.magic,[77,65,84,50])!=0)throw new t.ValidationNotEqualError([77,65,84,50],this.magic,this._io,"/types/matl/types/mat2/seq/0");this.size=this._io.readU4le(),this.name=t.bytesToStr(this._io.readBytesTerm(0,!1,!0,!0),"ASCII"),this.numTextures=this._io.readU4le(),this.textures=[];for(var f=0;f<this.numTextures;f++)this.textures.push(t.bytesToStr(this._io.readBytesTerm(0,!1,!0,!0),"ASCII"));this.flags=this._io.readU4le(),this.brightness=this._io.readF4le(),this.shininess=this._io.readF4le(),this.envmap=t.bytesToStr(this._io.readBytesTerm(0,!1,!0,!0),"ASCII")},c}();return a}(),p=r.Vec3=function(){function a(u,c,f){this._io=u,this._parent=c,this._root=f||this,this._read()}return a.prototype._read=function(){this.x=this._io.readF4le(),this.y=this._io.readF4le(),this.z=this._io.readF4le()},a}(),l=r.Vgeo=function(){function a(c,f,g){this._io=c,this._parent=f,this._root=g||this,this._read()}a.prototype._read=function(){if(this.magic=this._io.readBytes(4),t.byteArrayCompare(this.magic,[86,71,69,79])!=0)throw new t.ValidationNotEqualError([86,71,69,79],this.magic,this._io,"/types/vgeo/seq/0");this.size=this._io.readU4le(),this.offsets=[];for(var c=0;c<this._parent.header.numItabEntries;c++)this.offsets.push(new u(this._io,this,this._root))};var u=a.Offset=function(){function c(f,g,w){this._io=f,this._parent=g,this._root=w||this,this._read()}return c.prototype._read=function(){this.frameOffsets=[];for(var f=0;f<this._parent._parent.header.numFrames;f++)this.frameOffsets.push(this._io.readU1())},c}();return a}(),b=r.Geom=function(){function a(f,g,w){this._io=f,this._parent=g,this._root=w||this,this._read()}a.prototype._read=function(){if(this.magic=this._io.readBytes(4),t.byteArrayCompare(this.magic,[71,69,79,77])!=0)throw new t.ValidationNotEqualError([71,69,79,77],this.magic,this._io,"/types/geom/seq/0");if(this.size=this._io.readU4le(),this._root.header.format==r.MeshFormat.MESH){this.vertices=[];for(var f=0;f<this._parent.header.numBaseVertices;f++)this.vertices.push(new p(this._io,this,this._root))}if(this._root.header.format==r.MeshFormat.ANIM){this.verticesAnim=[];for(var f=0;f<this._parent.header.numBaseVertices;f++)this.verticesAnim.push(new c(this._io,this,this._root))}};var u=a.Vec3Packed=function(){function f(g,w,P){this._io=g,this._parent=w,this._root=P||this,this._read()}return f.prototype._read=function(){this.z=this._io.readBitsIntLe(10),this.y=this._io.readBitsIntLe(10),this.x=this._io.readBitsIntLe(10),this.pad=this._io.readBitsIntLe(2)},Object.defineProperty(f.prototype,"xyz",{get:function(){return this._m_xyz!==void 0?this._m_xyz:(this._m_xyz=[(this.x-512)/511*this._root.mesh.header.scale,(this.y-512)/511*this._root.mesh.header.scale,(this.z-512)/511*this._root.mesh.header.scale],this._m_xyz)}}),f}(),c=a.Vec3Anim=function(){function f(g,w,P){this._io=g,this._parent=w,this._root=P||this,this._read()}return f.prototype._read=function(){this.coords=new u(this._io,this,this._root),this.frameBase=this._io.readU1()},f}();return a}();return r}();return e})});var rt=xt(Cr(),1),Hr=xt(Wr(),1),Jr=xt(ae(),1);function Ln(t,e,r){let s=t.slice(t.lastIndexOf("/")+1,-4),o=new Hr.default(new Jr.default(e));if(o.header.format>2)return;let h=o.mesh.header.numBaseVertices;function y(a,u){let c=o.mesh.itab.frameChunks[Math.floor(a/128)].geomBase[u],f=o.mesh.vgeo.offsets[u].frameOffsets[a],g=c+f,w=o.mesh.geom.verticesAnim[g],P=w.frameBase;if(r.write(`# geomIndex ${g} base ${w.frameBase} frame ${a}
`),(a&127)>P){let O=o.mesh.geom.verticesAnim[g+1],S=O.frameBase,B=(a&127-P)/(S-P);r.write(`# nextBase ${S} geomFactor ${B}
`);let U=(w.coords.x-512)/511*o.mesh.header.scale-o.mesh.header.translation.x,F=(w.coords.y-512)/511*o.mesh.header.scale-o.mesh.header.translation.y,J=(w.coords.z-512)/511*o.mesh.header.scale-o.mesh.header.translation.z;return U=U*(1-B)+B*((O.coords.x-512)/511*o.mesh.header.scale-o.mesh.header.translation.x),F=F*(1-B)+B*((O.coords.y-512)/511*o.mesh.header.scale-o.mesh.header.translation.y),J=J*(1-B)+B*((O.coords.z-512)/511*o.mesh.header.scale-o.mesh.header.translation.z),r.write(rt.default.format(`v %d %d %d
`,U,-J,F)),h++,h}return g+1}let d=o.header.format===2,m=0;for(let a=0;a<o.mesh.header.numGroups;a++)m+=o.mesh.model.groups[a].numTrisPerLevel[0];r.write(`# mesh numGroups: ${o.mesh.header.numGroups} numVerts: ${o.mesh.header.numBaseVertices} numTriangles: ${m}
`);for(let a=0;a<o.materials.numMaterials;++a){let u=o.materials.materials[a];r.write(`newmtl ${u.name}
`),r.write(`map_kd ${u.textures[0]}.png
`),r.write(`map_bump ${u.textures[0]}_n.png
`)}r.write(`

`),r.write(`mtllib ${s}.mtl
`),r.write(`# ${o.mesh.header.numBaseVertices} vertices
`);for(let a=0;a<o.mesh.header.numBaseVertices;++a)if(d){let u=o.mesh.geom.verticesAnim[a];r.write(rt.default.format(`v %d %d %d
`,(u.coords.x-512)/511*o.mesh.header.scale-o.mesh.header.translation.x,-((u.coords.z-512)/511*o.mesh.header.scale-o.mesh.header.translation.z),(u.coords.y-512)/511*o.mesh.header.scale-o.mesh.header.translation.y))}else{let u=o.mesh.geom.vertices[a];r.write(rt.default.format(`v %d %d %d
`,u.x-o.mesh.header.translation.x,-(u.z-o.mesh.header.translation.z),u.y-o.mesh.header.translation.y))}for(let a=0;a<o.mesh.header.numGroups;++a){let u=o.mesh.model.groups[a],c=o.mesh.model.groupData[a];r.write(`# ${o.materials.materials[c.materialIdx].name} ${u.numVertices} uniq verts
`);for(let f=0;f<u.numVertices;++f){let g=c.vertices.vertexData[f];r.write(rt.default.format(`vt %d %d
`,g.u/32768,1-g.v/32768))}}d&&r.write(`# ${o.mesh.header.numFrames} frames
`);let i,n,p,l=0,b=0;for(l=0;l<(d?o.mesh.header.numFrames:1);++l){r.write(`o ${s}_${l}

`);let a=0;for(let u=0;u<o.mesh.header.numGroups;u++){let c=o.mesh.model.groups[u],f=o.mesh.model.groupData[u];r.write(`g ${o.materials.materials[f.materialIdx].name}_${l}
`),r.write(`usemtl ${o.materials.materials[f.materialIdx].name}
`),r.write(`# ${c.numTrisPerLevel[b]} triangles
`);for(let g=0;g<c.numTrisPerLevel[b];++g){let w=f.polygons.lodLevels[b].triangles[g],P=f.vertices.vertexData[w.x],O=f.vertices.vertexData[w.y],S=f.vertices.vertexData[w.z];d?(r.write(`# grp ${u} tri ${g}
`),i=y(l,P.itabIdx),n=y(l,O.itabIdx),p=y(l,S.itabIdx)):(i=P.index+1,n=O.index+1,p=S.index+1),r.write(`f ${i}/${a+w.x+1} ${p}/${a+w.z+1} ${n}/${a+w.y+1}
`)}a+=c.numVertices}}}export{Ln as kmf2obj};
